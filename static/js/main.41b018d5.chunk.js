(this.webpackJsonpyalantis=this.webpackJsonpyalantis||[]).push([[0],{13:function(e,t,r){e.exports={alphabetMenu:"employees_alphabetMenu__2fkDl",employees:"employees_employees__U33kk"}},14:function(e,t,r){e.exports={letterSection:"letter-section_letterSection__3xXyB",header:"letter-section_header__1y2R6"}},15:function(e,t,r){e.exports={header:"month-group_header__1WAyj",monthGroup:"month-group_monthGroup__2jWzf"}},20:function(e,t,r){e.exports={fullName:"user_fullName__2tbOd"}},21:function(e,t,r){e.exports={employeesBirthday:"employees-birthday_employeesBirthday__HpL3Q"}},35:function(e,t,r){},37:function(e,t,r){"use strict";r.r(t);var n=r(1),s=r(0),c=r.n(s),a=r(6),o=r.n(a),l=r(4),i=(r(35),r(3)),u=r(17),d=r(18),h=r(2),p=r(23),b=r(12),j=r.n(b),m=r(19),f="LOAD_USERS_REQUEST",y="LOAD_USERS_SUCCESS",O="LOAD_USERS_FAILURE",v="USER_TRIGGER",g=function(){var e=localStorage.getItem("selectedUserIds");try{e=e?JSON.parse(e):[]}catch(t){e=[]}return{error:null,loading:!1,byId:{},allIds:[],selectedIds:e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(h.a)(Object(h.a)({},e),{},{loading:!0,error:null});case y:var r=t.payload.reduce((function(e,t){return e[t.id]=t,e}),{});return Object(h.a)(Object(h.a)({},e),{},{loading:!1,error:null,byId:r,allIds:Object.keys(r)});case O:return Object(h.a)(Object(h.a)({},e),{},{loading:!1,error:t.error});case v:return Object(h.a)(Object(h.a)({},e),{},{selectedIds:t.payload});default:return e}},_=Object(i.combineReducers)({users:x}),N=Object(i.createStore)(_,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(d.a))),I=r(13),S="abcdefghijklmnopqrstuvwxyz".split(""),U=["January","February","March","April","May","June","July","August","September","October","November","December"],k=r(14),E=r(20),w=function(e){var t=e.user,r=e.onChange;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("span",{className:E.fullName,children:[t.lastName," ",t.firstName]}),Object(n.jsx)("input",{type:"checkbox",onChange:function(e){return r(t.id,e)},checked:t.checked})]})},D=function(e){var t=e.letter,r=e.users,s=e.onUserCheck;return Object(n.jsxs)("div",{className:k.letterSection,children:[Object(n.jsx)("div",{className:k.header,children:t}),r.length?r.sort((function(e,t){return e.lastName.localeCompare(t.lastName)})).map((function(e){return Object(n.jsx)(w,{user:e,onChange:s},e.id)})):"\u2014"]})},R={loadUsers:function(){return function(){var e=Object(m.a)(j.a.mark((function e(t){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:f}),e.next=3,fetch("".concat("https://yalantis-react-school-api.yalantis.com/api/task0","/users"));case 3:if(r=e.sent,e.prev=4,r.ok){e.next=7;break}throw new Error("Bad request");case 7:return e.next=9,r.json();case 9:n=e.sent,t({type:y,payload:n}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),t({type:O,error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()},triggerUser:function(e,t){return function(r,n){var s=n().users,c=t?[].concat(Object(p.a)(s.selectedIds),[e]):s.selectedIds.filter((function(t){return t!==e}));localStorage.setItem("selectedUserIds",JSON.stringify(c)),r({type:v,payload:c})}}},C=Object(l.b)((function(e){var t=e.users,r=t.byId,n=t.allIds,s=t.loading,c=t.error,a=t.selectedIds;return{users:n.map((function(e){return r[e]})),isLoading:s,error:c,selectedUserIds:a}}),R)((function(e){var t=e.users,r=e.loadUsers,c=e.triggerUser,a=e.isLoading,o=e.selectedUserIds,l=e.error;Object(s.useEffect)((function(){r()}),[r]);var i=function(e){return t.slice().filter((function(t){return t.lastName.toLowerCase().startsWith(e)})).map((function(e){return e.checked=o.includes(e.id),e}))},u=function(e,t){return c(e,t.target.checked)},d=null;return d=l?"Error: ".concat(l.message):a?"Loading...":S.map((function(e){return Object(n.jsx)(D,{letter:e,users:i(e),onUserCheck:u},e)})),Object(n.jsxs)("div",{className:I.employees,children:[Object(n.jsx)("div",{className:"header",children:"Employees"}),Object(n.jsx)("div",{className:I.alphabetMenu,children:d})]})})),L=r(22),M=r(15),A=function(e){var t=new Date(e);return"".concat(t.getDate()," ").concat(U[t.getMonth()],", ").concat(t.getFullYear()," year")},J=function(e){var t=e.monthName,r=e.users;return Object(n.jsxs)("div",{className:M.monthGroup,children:[Object(n.jsx)("div",{className:M.header,children:t}),Object(n.jsx)("ul",{children:r.sort((function(e,t){return Date.parse(e.dob)-Date.parse(t.dob)})).map((function(e){return Object(n.jsxs)("li",{children:[e.lastName," ",e.firstName," - ",A(e.dob)]},e.id)}))})]})},B=r(21),G=Object(l.b)((function(e){var t=e.users,r=t.byId;return{selectedUsers:t.selectedIds.map((function(e){return r[e]})).filter((function(e){return!!e}))}}))((function(e){var t,r=e.selectedUsers,s=(t=r,U.reduce((function(e,r,n){var s=t.filter((function(e){return new Date(e.dob).getMonth()===n}));return e[r]=s,e}),{})),c=Object.entries(s).map((function(e){var t=Object(L.a)(e,2),r=t[0],s=t[1];return s.length?Object(n.jsx)(J,{monthName:r,users:s.slice()},r):null}));return Object(n.jsxs)("div",{className:B.employeesBirthday,children:[Object(n.jsx)("div",{className:"header",children:"Employees birthday"}),r.length?c:"No selected employees"]})}));o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(l.a,{store:N,children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(C,{}),Object(n.jsx)(G,{})]})})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.41b018d5.chunk.js.map